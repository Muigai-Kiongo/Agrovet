{% extends "base.html" %}

{% block title %}{{ product.name }} | Agrovet Store{% endblock %}

{% block content %}
<nav aria-label="breadcrumb" class="mt-3">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'inventory:store_home' %}" class="text-success text-decoration-none">Store</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
    </ol>
</nav>

<div class="row mt-2">
    <div class="col-md-6 mb-4">
        <div class="card border-0 shadow-sm overflow-hidden p-3 bg-white text-center">
            {% if product.image %}
                <img src="{{ product.image.url }}" class="img-fluid rounded" alt="{{ product.name }}" style="max-height: 500px; width: auto; object-fit: contain;">
            {% else %}
                <div class="bg-light text-muted d-flex flex-column align-items-center justify-content-center rounded" style="height: 400px;">
                    <i class="fas fa-image fa-4x opacity-25 mb-3"></i>
                    <span class="fs-5">Image Coming Soon</span>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="col-md-6">
        <div class="ps-md-4">
            <span class="badge bg-success-subtle text-success border border-success-subtle mb-2 px-3 rounded-pill text-uppercase">
                {{ product.category.name|default:"General" }}
            </span>
            
            <h1 class="display-6 fw-bold text-dark">{{ product.name }}</h1>
            <p class="text-muted mb-4">SKU: <span class="fw-bold">{{ product.sku }}</span></p>
            
            <div class="d-flex align-items-baseline mb-3">
                <h2 class="text-success fw-bold me-2">KES {{ product.selling_price|floatformat:2 }}</h2>
                <span class="text-muted">/ {{ product.unit|default:"Unit" }}</span>
            </div>

            <div class="mb-4">
                {% if product.stock_quantity > 0 %}
                    <div class="d-flex align-items-center">
                        <span class="badge bg-success p-2 px-3 shadow-sm">
                            <i class="fas fa-check-circle me-1"></i> In Stock
                        </span>
                        <span class="ms-3 text-muted small">{{ product.stock_quantity|floatformat:0 }} units available</span>
                    </div>
                {% else %}
                    <span class="badge bg-danger p-2 px-3 shadow-sm">
                        <i class="fas fa-times-circle me-1"></i> Currently Out of Stock
                    </span>
                {% endif %}
            </div>

            <div class="card border-0 bg-light mb-4">
                <div class="card-body">
                    <h6 class="fw-bold"><i class="fas fa-info-circle me-2 text-success"></i>Product Description</h6>
                    <p class="mb-0 text-secondary" style="line-height: 1.6;">
                        {{ product.description|default:"No detailed description available for this item." }}
                    </p>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-6">
                    <div class="d-flex align-items-center">
                        <div class="bg-success-subtle p-2 rounded-circle me-3">
                            <i class="fas fa-shipping-fast text-success"></i>
                        </div>
                        <small class="fw-bold">Fast Farm Delivery</small>
                    </div>
                </div>
                <div class="col-6">
                    <div class="d-flex align-items-center">
                        <div class="bg-primary-subtle p-2 rounded-circle me-3">
                            <i class="fas fa-shield-alt text-primary"></i>
                        </div>
                        <small class="fw-bold">Quality Guaranteed</small>
                    </div>
                </div>
            </div>

            <div class="d-grid gap-3">
                {% if product.stock_quantity > 0 %}
                    <a href="{% url 'inventory:add_to_cart' product.pk %}" class="btn btn-success btn-lg rounded-pill py-3 shadow-sm fw-bold">
                        <i class="fas fa-cart-plus me-2"></i> Add to My Cart
                    </a>
                {% else %}
                    <button class="btn btn-secondary btn-lg rounded-pill py-3" disabled>
                        Item Currently Unavailable
                    </button>
                {% endif %}
                
                <a href="{% url 'inventory:store_home' %}" class="btn btn-link text-success text-decoration-none text-center">
                    <i class="fas fa-arrow-left me-2"></i> Continue Shopping
                </a>
            </div>

            <div class="mt-5 p-3 border rounded border-dashed text-center">
                <p class="small text-muted mb-2">Secure Payments Powered By</p>
                <div class="d-flex justify-content-center align-items-center gap-3">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/1/15/M-PESA_LOGO-01.svg" alt="M-Pesa" style="height: 30px;">
                    <span class="text-muted fw-bold">|</span>
                    <i class="fas fa-lock text-muted me-1"></i> <span class="small text-muted">SSL Secured</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}